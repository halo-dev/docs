---
title: 附件
description: 附件管理相关功能说明
---

## 存储策略

为了能够更加灵活地管理附件的存储位置，Halo 提供了存储策略的概念。

Halo 中支持多种类型的存储策略，你可以通过安装插件的方式对支持的存储策略类型进行扩展。一个存储策略包含了存储提供者，具体存储位置等使用该类型存储所必要的各种信息。

你可以点击附件页面右上角的 `存储策略` 按钮对存储策略进行管理。

![存储策略](/img/user-guide/attachments/attachment-policy.png)

### 新建存储策略

点击存储策略列表右上方的 `+` 添加按钮即可新建一个存储策略。

![添加存储策略](/img/user-guide/attachments/attachment-policy-add.png)

添加时首先需要选择一种存储策略类型，系统内置的存储策略为本地存储，图中的 `Aliyun OSS` 阿里云的 OSS 对象存储由[该插件](https://github.com/halo-sigs/plugin-alioss)提供。

![添加本地存储策略](/img/user-guide/attachments/attachment-policy-add-local.png)
添加一个本地存储时，你需要输入名称及存储位置信息。其中的存储位置决定了使用该存储策略的附件，在服务器上的实际存储路径，路径规则为 `{Halo 工作目录}/attachments/{存储位置}`，其中的 Halo 工作目录由安装时指定的参数决定，默认为 `~/.halo2`。
:::info
默认的 Docker 部署方式，实际存储位置由挂载到 Halo 容器工作目录的服务器目录所决定。
:::

### 删除存储策略

点击存储策略列表指定存储所在行后方的 `···` 更多操作按钮即可对该存储策略进行编辑或删除。

![存储策略操作](/img/user-guide/attachments/attachment-policy-operate.png)
:::info
为了保护附件安全避免用户误操作，当存储策略下存在附件时，该存储策略不允许删除。如果确定要删除某个存储策略及该存储策略中的所有附件，可以先按照存储策略对附件进行筛选，先批量删除存储策略下的所有附件，再删除存储策略。
:::

## 附件分组

通过附件分组功能可以方便地将同一类型、同一用途的附件划分到一个分组中，方便后续附件的管理和插件。

附件所使用的存储策略决定了附件的实际存储位置和 URL 规则，而附件分组功能仅是逻辑上的归类划分，不会影响附件的存储位置及 URL。

### 新建分组

点击附件列表上方的 `添加分组` 按钮即可新建一个分组。

![添加分组](/img/user-guide/attachments/attachment-group-add.png)

### 删除分组

点击附件列表上方指定分组上的 `···` 更多按钮，可以对分组进行重命名或删除操作。

Halo 目前提供了两种分组删除策略：

1. **删除并将附件移动至未分组**：分组被删将被删除，分组下的附件移动到未分组中；
2. **删除并同时删除附件**：先删除下的所有附件后，再删除该分组。
:::warning
当使用 `删除并同时删除附件` 方式时，分组下的所有附件会被同时删除且不可恢复、无法找回，请谨慎进行该操作。
:::

## 上传附件

点击附件列表右上方的 `上传` 按钮即可上传新的附件到 Halo。
:::info
附件会被上传到当前选中的分组中，如果选择的是 `全部` 附件，则附件会被默认上传到 `未分组` 中。
:::

![上传附件](/img/user-guide/attachments/attachment-upload.png)

上传附件时你需要先选择一个存储策略，后续上传的附件将会存储在选中的存储策略中。

你可以点击 `浏览` 或 `我的设备` 图标唤起本地文件管理器进行文件选择，也可以直接将文件拖拽到待上传文件区域中。

![上传多个附件](/img/user-guide/attachments/attachment-upload-multiple.png)

如上图所示，你可以同时添加多个文件一次性完成多个附件的上传。

## 查看附件

点击附件列表中的某一个附件即可查看该附件的详细信息。
:::info
对于存储策略类型为本地存储的附件，详细信息中的的原始链接生成规则为 `/upload/{存储策略存储路径}/{文件名称}`。
:::

## 删除附件

附件页面提供两种浏览模式，列表模式和平铺模式。

在平铺模式下，你可以点击附件缩略图右上角的 `√` 图标选中若干个附件，通过上方的批量操作按钮删除选中的附件。
![批量操作附件](/img/user-guide/attachments/attachment-batch-operate.png)

在列表模式下，你可以点击指定附件所在行后方的 `···` 更多按钮，对附件进行删除操作。

:::warning
附件删除后不可恢复、无法找回，请谨慎进行该操作。
:::

## 移动附件所在分组

与批量删除操作类似，你可以选中多个附件后在上方的批量操作按钮中选择 `移动` 操作，将所选附件移动到指定的分组中。
